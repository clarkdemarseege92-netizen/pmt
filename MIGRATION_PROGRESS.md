# Next.js i18n è¿ç§»è¿›åº¦è·Ÿè¸ª

**è¿ç§»æ–¹æ¡ˆï¼š** æ–¹æ¡ˆA - next-intl æ ‡å‡†è·¯ç”±
**å¼€å§‹æ—¶é—´ï¼š** 2025-12-14
**ç›®æ ‡ï¼š** å°†é¡¹ç›®ä»æ··ä¹±çš„ [locale] è·¯ç”±è¿ç§»åˆ°æ ‡å‡† next-intl è·¯ç”±ç»“æ„

---

## ğŸ“Š æ•´ä½“è¿›åº¦

- **æ€»è¿›åº¦ï¼š** 44% (4/9 é˜¶æ®µå®Œæˆ) âœ…
- **å½“å‰é˜¶æ®µï¼š** é˜¶æ®µ1-4å·²å®Œæˆï¼Œæµ‹è¯•é€šè¿‡
- **å®é™…ç”¨æ—¶ï¼š** çº¦2å°æ—¶ï¼ˆå«è°ƒè¯•ï¼‰
- **é¢„è®¡å‰©ä½™æ—¶é—´ï¼š** çº¦6.25å°æ—¶

---

## ğŸ¯ å„é˜¶æ®µè¯¦ç»†è¿›åº¦

### âœ… ç¬¬1é˜¶æ®µï¼šå‡†å¤‡å’Œå¤‡ä»½ï¼ˆ15åˆ†é’Ÿï¼‰
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
**å®é™…ç”¨æ—¶ï¼š** 10åˆ†é’Ÿ

- [x] æäº¤å½“å‰ä»£ç ä½œä¸ºå¤‡ä»½
- [x] æ£€æŸ¥ package.json ç¡®è®¤ next-intl ä¾èµ–
- [x] åˆ›å»º MIGRATION_PROGRESS.md è·Ÿè¸ªæ–‡ä»¶

---

### âœ… ç¬¬2é˜¶æ®µï¼šå»ºç«‹æ ‡å‡†next-intlç»“æ„ï¼ˆ30åˆ†é’Ÿï¼‰
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
**å®é™…ç”¨æ—¶ï¼š** 20åˆ†é’Ÿ

- [x] æ›´æ–° i18n/routing.ts é…ç½®ï¼ˆæ·»åŠ  localePrefix: 'always'ï¼‰
- [x] æ£€æŸ¥ i18n/request.ts é…ç½®ï¼ˆå·²æ­£ç¡®ï¼‰
- [x] æ£€æŸ¥ middleware.tsï¼ˆå·²é›†æˆï¼‰
- [x] æ›´æ–° next.config.tsï¼ˆä¿®å¤ staleTimes é…ç½®ï¼‰
- [x] æ›´æ–° app/layout.tsx æ ¹å¸ƒå±€ï¼ˆç§»é™¤ Navbarï¼‰
- [x] åˆ›å»º app/[locale]/layout.tsxï¼ˆæ·»åŠ  NextIntlClientProvider å’Œ Navbarï¼‰

**å…³é”®æ–‡ä»¶çŠ¶æ€ï¼š**
- âœ… `i18n/routing.ts` - è·¯ç”±å®šä¹‰ï¼ˆlocalePrefix: 'always'ï¼‰
- âœ… `i18n/request.ts` - æœåŠ¡å™¨ç«¯é…ç½®
- âœ… `middleware.ts` - ä¸­é—´ä»¶é›†æˆ
- âœ… `next.config.ts` - Next.jsé…ç½®
- âœ… `app/layout.tsx` - æ ¹å¸ƒå±€ï¼ˆHTML/Bodyï¼‰
- âœ… `app/[locale]/layout.tsx` - Localeå¸ƒå±€ï¼ˆProvider + Navbarï¼‰

---

### âœ… ç¬¬3é˜¶æ®µï¼šæ ¸å¿ƒé¡µé¢è¿ç§»ï¼ˆ45åˆ†é’Ÿï¼‰
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
**å®é™…ç”¨æ—¶ï¼š** 1å°æ—¶ï¼ˆå«è°ƒè¯•ï¼‰

- [x] åˆ›å»º app/[locale]/layout.tsx
- [x] è¿ç§»é¦–é¡µåˆ° app/[locale]/page.tsx
- [x] è¿ç§»ç™»å½•é¡µåˆ° app/[locale]/login/page.tsx
- [x] æ£€æŸ¥ Navbar ç»„ä»¶ï¼ˆå·²ä½¿ç”¨æ­£ç¡®å¯¼å…¥ï¼‰
- [x] æ£€æŸ¥ LanguageSwitcher ç»„ä»¶ï¼ˆå·²ä½¿ç”¨æ­£ç¡®å¯¼å…¥ï¼‰
- [x] æœ¬åœ°æµ‹è¯•åŸºç¡€åŠŸèƒ½
- [x] ä¿®å¤å‘ç°çš„é—®é¢˜ï¼ˆNavbar åœ¨ Provider å†…éƒ¨ï¼‰

**æµ‹è¯•æ¸…å•ï¼š**
- [x] è®¿é—® `/` è‡ªåŠ¨é‡å®šå‘åˆ° `/th` âœ…
- [x] `/th`ã€`/zh`ã€`/en` è·¯ç”±æ­£å¸¸è¿”å›200 âœ…
- [x] `/th/login`ã€`/zh/login` ç™»å½•é¡µæ­£å¸¸ âœ…
- [x] ä¸­é—´ä»¶æ­£ç¡®å¤„ç†è¯­è¨€æ£€æµ‹ âœ…
- [x] ç¿»è¯‘æ­£ç¡®åŠ è½½ âœ…

**è°ƒè¯•è¿‡ç¨‹ï¼š**
1. åˆå§‹å®ç°ï¼šè¯¯åˆ é™¤ app/[locale]/ ç›®å½•å¯¼è‡´404
2. ä¿®å¤ï¼šæ¢å¤ app/[locale]/ ç»“æ„ï¼ˆnext-intl æ ‡å‡†è¦æ±‚ï¼‰
3. é‡åˆ°500é”™è¯¯ï¼šNavbar åœ¨ Provider å¤–éƒ¨
4. ä¿®å¤ï¼šå°† Navbar ç§»åˆ° app/[locale]/layout.tsx å†…éƒ¨
5. æµ‹è¯•é€šè¿‡ï¼šæ‰€æœ‰è·¯ç”±æ­£å¸¸å·¥ä½œ

---

### âœ… ç¬¬4é˜¶æ®µï¼šå…³é”®åŠŸèƒ½é¡µé¢è¿ç§»ï¼ˆ1å°æ—¶ï¼‰
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ
**å®é™…ç”¨æ—¶ï¼š** 30åˆ†é’Ÿ

- [x] è¿ç§»æœç´¢é¡µ app/search/ â†’ app/[locale]/search/
- [x] è¿ç§»ä¼˜æƒ åˆ¸è¯¦æƒ… app/coupon/[id]/ â†’ app/[locale]/coupon/[id]/
- [x] è¿ç§»ç»“è´¦é¡µ app/checkout/ â†’ app/[locale]/checkout/
- [x] æ·»åŠ ç¿»è¯‘keyåˆ° messages/*.jsonï¼ˆsearch, couponDetail, checkoutï¼‰
- [x] æµ‹è¯•æ‰€æœ‰è¿ç§»é¡µé¢ï¼ˆnpm run build æˆåŠŸï¼‰

**è¿ç§»è¦ç‚¹ï¼š**
- æœç´¢é¡µé¢ï¼š
  - æ›´æ–° params ä¸º Promise ç±»å‹
  - æ›¿æ¢ Link å¯¼å…¥ä¸º @/i18n/routing
  - ä½¿ç”¨ getLocalizedValue æ›¿ä»£ getLangName
  - æ·»åŠ  search å‘½åç©ºé—´ç¿»è¯‘
- ä¼˜æƒ åˆ¸è¯¦æƒ…é¡µï¼š
  - æ·»åŠ  locale åˆ° params
  - ä½¿ç”¨ getTranslations('couponDetail')
  - æ·»åŠ  couponDetail å‘½åç©ºé—´ç¿»è¯‘
- ç»“è´¦é¡µï¼š
  - å®¢æˆ·ç«¯ç»„ä»¶ä½¿ç”¨ useTranslations
  - æœåŠ¡ç«¯ç»„ä»¶ä½¿ç”¨ getTranslations
  - æ·»åŠ  checkout å‘½åç©ºé—´ç¿»è¯‘

**æµ‹è¯•ç»“æœï¼š**
- [x] Build æˆåŠŸ âœ…
- [x] i18n æ­£ç¡®åŠ è½½æ‰€æœ‰è¯­è¨€ (th, zh, en) âœ…
- [x] æ‰€æœ‰é¡µé¢ç¼–è¯‘é€šè¿‡ âœ…

---

### â³ ç¬¬5é˜¶æ®µï¼šç”¨æˆ·ä¸­å¿ƒè¿ç§»ï¼ˆ1.5å°æ—¶ï¼‰
**çŠ¶æ€ï¼š** â³ å¾…å¼€å§‹
**é¢„è®¡æ—¶é—´ï¼š** 1.5å°æ—¶

**è¿ç§»é¡µé¢ï¼š**
- [ ] app/client/layout.tsx
- [ ] app/client/profile/
- [ ] app/client/orders/
- [ ] app/client/favorites/
- [ ] app/client/history/
- [ ] app/client/reviews/

---

### â³ ç¬¬6é˜¶æ®µï¼šå•†å®¶ä¸­å¿ƒè¿ç§»ï¼ˆ2å°æ—¶ï¼‰
**çŠ¶æ€ï¼š** â³ å¾…å¼€å§‹
**é¢„è®¡æ—¶é—´ï¼š** 2å°æ—¶

**è¿ç§»é¡µé¢ï¼š**
- [ ] app/merchant/layout.tsx
- [ ] app/merchant/dashboard/
- [ ] app/merchant/coupons/
- [ ] app/merchant/products/
- [ ] app/merchant/orders/
- [ ] app/merchant/redeem/
- [ ] app/merchant/settings/

---

### â³ ç¬¬7é˜¶æ®µï¼šç®¡ç†å‘˜åå°è¿ç§»ï¼ˆ1.5å°æ—¶ï¼‰
**çŠ¶æ€ï¼š** â³ å¾…å¼€å§‹
**é¢„è®¡æ—¶é—´ï¼š** 1.5å°æ—¶

**è¿ç§»é¡µé¢ï¼š**
- [ ] app/admin/layout.tsx
- [ ] app/admin/page.tsx
- [ ] app/admin/categories/
- [ ] app/admin/users/
- [ ] app/admin/tools/

---

### â³ ç¬¬8é˜¶æ®µï¼šæ•°æ®åº“ä¿®å¤å’Œæµ‹è¯•ï¼ˆ30åˆ†é’Ÿï¼‰
**çŠ¶æ€ï¼š** â³ å¾…å¼€å§‹
**é¢„è®¡æ—¶é—´ï¼š** 30åˆ†é’Ÿ

- [ ] æ‰§è¡ŒSQLè„šæœ¬ä¿®å¤åˆ†ç±» name å­—æ®µ
- [ ] è¡¥å……ä¼˜æƒ åˆ¸ zh/en ç¿»è¯‘æ•°æ®
- [ ] å®Œæ•´åŠŸèƒ½æµ‹è¯•
- [ ] Vercel éƒ¨ç½²éªŒè¯

---

### â³ ç¬¬9é˜¶æ®µï¼šæ¸…ç†ï¼ˆ15åˆ†é’Ÿï¼‰
**çŠ¶æ€ï¼š** â³ å¾…å¼€å§‹
**é¢„è®¡æ—¶é—´ï¼š** 15åˆ†é’Ÿ

**åˆ é™¤æ—§æ–‡ä»¶ï¼š**
- [ ] contexts/LanguageContext.tsx
- [ ] hooks/useTranslation.ts
- [ ] components/LanguageSwitcher.tsxï¼ˆæ—§ç‰ˆæœ¬ï¼‰
- [ ] å¤‡ä»½çš„ app/[locale]/ ç›®å½•

---

## ğŸ“ å˜æ›´æ—¥å¿—

### 2025-12-14 (ä¸‹åˆ)
- âœ… å®Œæˆç¬¬4é˜¶æ®µï¼šå…³é”®åŠŸèƒ½é¡µé¢è¿ç§»
- è¿ç§»æœç´¢é¡µã€ä¼˜æƒ åˆ¸è¯¦æƒ…é¡µã€ç»“è´¦é¡µåˆ° locale ç»“æ„
- æ·»åŠ æ‰€æœ‰å¿…è¦çš„ç¿»è¯‘ï¼ˆth/zh/enï¼‰
- Build æµ‹è¯•é€šè¿‡

### 2025-12-14 (ä¸Šåˆ)
- åˆ›å»ºè¿ç§»è¿›åº¦è·Ÿè¸ªæ–‡ä»¶
- å®Œæˆé˜¶æ®µ1-3çš„æ ¸å¿ƒè¿ç§»
- ä¿®å¤ i18n è¯­è¨€åˆ‡æ¢ bug (setRequestLocale)

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### å…³é”®æŠ€æœ¯è¦ç‚¹

1. **æœåŠ¡å™¨ç»„ä»¶ç¿»è¯‘**
```typescript
import {getTranslations} from 'next-intl/server';
const t = await getTranslations('namespace');
```

2. **å®¢æˆ·ç«¯ç»„ä»¶ç¿»è¯‘**
```typescript
'use client';
import {useTranslations} from 'next-intl';
const t = useTranslations('namespace');
```

3. **é“¾æ¥æ›¿æ¢**
```typescript
import {Link} from '@/i18n/routing';  // ä¸æ˜¯ 'next/link'
<Link href="/path">é“¾æ¥</Link>
```

4. **è·¯ç”±å¯¼èˆª**
```typescript
import {useRouter, redirect} from '@/i18n/routing';
```

### å¸¸è§é—®é¢˜

1. **é—®é¢˜ï¼š** é¡µé¢è®¿é—®404
   **è§£å†³ï¼š** æ£€æŸ¥ä¸­é—´ä»¶é…ç½®ï¼Œç¡®ä¿ matcher æ­£ç¡®

2. **é—®é¢˜ï¼š** è¯­è¨€åˆ‡æ¢ä¸ç”Ÿæ•ˆ
   **è§£å†³ï¼š** æ£€æŸ¥ useRouter æ˜¯å¦ä» @/i18n/routing å¯¼å…¥

3. **é—®é¢˜ï¼š** ç¿»è¯‘ä¸æ˜¾ç¤º
   **è§£å†³ï¼š** æ£€æŸ¥ messages/*.json æ–‡ä»¶æ˜¯å¦æœ‰å¯¹åº”key

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

- [ ] å®Œæˆé˜¶æ®µ1-3çš„æ ¸å¿ƒè¿ç§»
- [ ] æœ¬åœ°æµ‹è¯•éªŒè¯
- [ ] æ ¹æ®æµ‹è¯•ç»“æœè°ƒæ•´
- [ ] ç»§ç»­åç»­é˜¶æ®µ

---

**æœ€åæ›´æ–°ï¼š** 2025-12-14
**æ›´æ–°äººï¼š** Claude Code
